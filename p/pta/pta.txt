各ポジションごとに、次に移動すべき場所は一意に定まる

ただ、上記を線形で計算する方法がわからず困っていた

普通にもらうdpを考えると終わり・・・