サイズm,n (m<=n)の2つのtreapをO(mlog(n/m))でマージするやつを使う
転倒数の計算はマージしながらやれば簡単


merging segment treeでもできるけどメモリ管理が面倒
(
大きい部分木から処理する
不要になったノードを適宜消していかないとメモリの解析が壊れる
)

splay木の指定理を用いると同様の計算量でできるらしいが、よくわからず
